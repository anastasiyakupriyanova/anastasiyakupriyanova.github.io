var count1 = 0;
var count2 = 0;
var count3 = 0;
!function (t) { var e = {}; function n(i) { if (e[i]) return e[i].exports; var r = e[i] = { i: i, l: !1, exports: {} }; return t[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports } n.m = t, n.c = e, n.d = function (t, e, i) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: i }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var i = Object.create(null); if (n.r(i), Object.defineProperty(i, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var r in t) n.d(i, r, function (e) { return t[e] }.bind(null, r)); return i }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "https://anastasiyakupriyanova.github.io/", n(n.s = 73) }([function (t, e, n) { "use strict"; n.d(e, "d", function () { return r }), n.d(e, "a", function () { return o }), n.d(e, "b", function () { return s }), n.d(e, "e", function () { return a }), n.d(e, "g", function () { return l }), n.d(e, "c", function () { return u }), n.d(e, "f", function () { return c }); var i, r = "first-data-payment-field-", o = "https://cert.api.firstdata.com/paymentjs/v2", s = "https://anastasiyakupriyanova.github.io/", a = "https://anastasiyakupriyanova.github.io/index.html#" + ((i = function () { return Math.floor(1e5 * Math.random()) })() + "-" + i() + "-" + i()), l = { classes: { empty: "firstdata-field-empty", focus: "firstdata-field-focused", invalid: "firstdata-field-invalid", valid: "firstdata-field-valid" }, customEvents: { blur: "blur", cardType: "cardType", change: "change", focus: "focus" }, fields: { card: { autocomplete: "cc-number", label: "Credit Card Number", maxLength: 22, placeholder: "•••• •••• •••• ••••", type: "tel" }, cvv: { autocomplete: "cc-csc", label: "CVV", maxLength: 4, placeholder: "•••", type: "tel" }, exp: { autocomplete: "cc-exp", label: "Expiration Date", maxLength: 9, placeholder: "MM / YY", type: "tel" }, name: { autocomplete: "cc-name", label: "Full Name", maxLength: 100, placeholder: "", type: "text" } }, styles: ["-moz-appearance", "-moz-osx-font-smoothing", "-moz-tap-highlight-color", "-moz-transition", "-webkit-appearance", "-webkit-font-smoothing", "-webkit-tap-highlight-color", "-webkit-transition", "-webkit-box-shadow", "-webkit-text-fill-color", "background-color", "appearance", "color", "direction", "font", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-weight", "letter-spacing", "line-height", "opacity", "outline", "text-shadow", "transition"] }, u = ["card", "cvv", "exp", "name"], c = function (t) { return -1 !== u.indexOf(t) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), function (t) { for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]) }(n(26)) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), function (t) { for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]) }(n(25)) }, , function (t, e, n) { "use strict"; n.d(e, "a", function () { return r }); var i = n(1), r = function () { function t(t, e) { this.state = t, this.element = e } return t.prototype.addClass = function (t) { this.element.classList ? this.element.classList.add(t) : this.hasClass(t) || (this.element.className += " " + t) }, t.prototype.removeClass = function (t) { if (this.element.classList) this.element.classList.remove(t); else if (this.hasClass(t)) { var e = new RegExp("(\\s|^)" + t + "(\\s|$)"); this.element.className = this.element.className.replace(e, " ") } }, t.prototype.setPlaceholder = function (t, e) { var n = this; i.Optional.of(this.state.fields[t]).map(function (t) { return t.config.placeholder }).orElse(e).ifPresent(function (t) { return n.element.setAttribute("placeholder", t) }) }, t.prototype.cssValidityClass = function (t, e) { this.state.classes.invalid && this.toggleCssClass(!t, this.state.classes.invalid), this.state.classes.valid && this.toggleCssClass(e, this.state.classes.valid) }, t.prototype.cssEmptyClass = function (t) { this.state.classes.empty && this.toggleCssClass(0 === t, this.state.classes.empty) }, t.prototype.cssFocusClass = function () { this.state.classes.focus && this.addClass(this.state.classes.focus) }, t.prototype.cssBlurClass = function () { this.state.classes.focus && this.removeClass(this.state.classes.focus) }, t.prototype.removeCssValidityClass = function () { this.state.classes.invalid && this.removeClass(this.state.classes.invalid), this.state.classes.valid && this.removeClass(this.state.classes.valid) }, t.prototype.toggleCssClass = function (t, e) { t ? this.addClass(e) : this.removeClass(e) }, t.prototype.hasClass = function (t) { return this.element.classList ? this.element.classList.contains(t) : !!this.element.className.match(new RegExp("(\\s|^)" + t + "(\\s|$)")) }, t }() }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = n(1), o = n(16), s = n(28), a = function () { function t(t) { this.fn = t } return t.identity = function () { return new s.EmptyPipeline }, t.bound = function (e) { return new o.BoundPipeline(e, t.identity()) }, t.fromCallable = function (e) { return new t(e) }, t.prototype.alsoDo = function (t) { return this.map(i.FnUtils.liftConsumer(t)) }, t.prototype.map = function (t) { return this.fn = i.FnUtils.compose(this.fn, t), this }, t.prototype.mapToProperty = function (t) { return this.map(i.FnUtils.liftProperty(t)) }, t.prototype.filter = function (t) { return this.map(function (e) { return r.Optional.of(e).filter(t) }) }, t.prototype.filterProperty = function (t, e) { return this.map(function (n) { return r.Optional.of(n).filterProperty(t, e) }) }, t.prototype.apply = function (t) { return this.fn(t) }, t.prototype.bind = function (t) { return new o.BoundPipeline(t, this) }, t.prototype.toCallable = function () { return this.fn }, t }(); e.Pipeline = a }, function (t, e, n) { "use strict"; function i(t) { for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]) } Object.defineProperty(e, "__esModule", { value: !0 }), i(n(5)), i(n(17)) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = /^\d+$/.compile(); e.StringUtils = { isNumeric: function (t) { return t.length > 0 && i.test(t) }, stripWhitespace: function (t) { return t.replace(/\s/g, "") }, stripNonNumeric: function (t) { return t.replace(/\D/g, "") }, split: function (t) { return function (e) { return e.split(t) } }, trim: function (t) { return t.trim() } } }, function (t, e, n) { "use strict"; var i; n.d(e, "a", function () { return i }), function (t) { t.BAD_FORM_DATA = "form validation failed", t.CLIENT_TOKEN_MISSING = "auth.clientToken is missing", t.CLIENT_KEY_MISSING = "auth.publicKeyBase64 is missing", t.CLIENT_NETWORK_ERROR = "unknown network error", t.BROWSER_NOT_SUPPORTED = "Browser not supported. Please upgrade to the latest version of Chrome, Firefox, IE 11 or Microsoft Edge." }(i || (i = {})) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1); e.ListUtils = { getFirst: function (t) { return t.length ? i.Optional.of(t[0]) : i.Optional.none() }, head: function (t) { return t[0] }, tail: function (t) { return t.slice(1) } } }, , function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = function () { function t(t, e) { this.list = t, this.pipeline = e } return t.prototype.alsoDo = function (t) { return this.pipeline = this.pipeline.alsoDo(t), this }, t.prototype.map = function (t) { return this.pipeline = this.pipeline.map(t), this }, t.prototype.mapToProperty = function (t) { return this.map(i.FnUtils.liftProperty(t)) }, t.prototype.flatMap = function (t) { return this.pipeline.flatMap(t).bind(this.list) }, t.prototype.sort = function (t) { return this.pipeline.sort(t).bind(this.list) }, t.prototype.filter = function (t) { return this.pipeline.filter(t).bind(this.list) }, t.prototype.filterProperty = function (t, e) { return this.pipeline.filterProperty(t, e).bind(this.list) }, t.prototype.reduce = function (t) { return this.pipeline.reduce(t).bind(this.list) }, t.prototype.toFirst = function () { return this.pipeline.toFirst().bind(this.list) }, t.prototype.apply = function () { return this.pipeline.apply(this.list) }, t.prototype.toCallable = function () { return this.apply.bind(this) }, t.prototype.toPipeline = function () { return this.pipeline.toPipeline().bind(this.list) }, t }(); e.BoundListPipeline = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.NumberReducers = { max: function (t, e) { return Math.max(t, e) }, min: function (t, e) { return Math.min(t, e) }, sum: function (t, e) { return t + e }, product: function (t, e) { return t * e } }, e.BoolReducers = { and: function (t, e) { return t && e }, or: function (t, e) { return t || e } }, e.StringReducers = { makeConcatReducer: function (t) { return function (e, n) { return e + t + n } }, concat: function (t, e) { return t + e } } }, function (t, e, n) { "use strict"; n.d(e, "a", function () { return r }); var i = function () { return (i = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }, r = function (t, e) { var n; return "function" == typeof window.CustomEvent ? n = new CustomEvent(t, { bubbles: !0, cancelable: !1, detail: i({}, e) }) : (n = document.createEvent("CustomEvent")).initCustomEvent(t, !0, !1, { detail: i({}, e) }), n } }, function (t, e, n) { "use strict"; var i = n(2), r = n(1), o = n(6), s = n(12), a = n(0), l = { brand: "", brandNiceType: "", empty: !0, field: "card", length: 0, potentiallyValid: !1, touched: !1, valid: !1 }, u = function (t) { return "card" === t ? l : { empty: !0, field: t, length: 0, potentiallyValid: !1, touched: !1, valid: !1 } }; function c(t) { return (c = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } n.d(e, "b", function () { return p }), n.d(e, "a", function () { return g }); var f = function () { return (f = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }, p = function (t) { return "card" === t.field }, d = function (t) { return { classes: t.classes || {}, fields: y(t.fields), form: { selector: t.form ? t.form.selector : void 0 }, styles: t.styles || {} } }, h = function (t, e) { return { config: e, field: t, validity: u(t) } }, y = function (t) { var e; return (e = {}).card = h("card", t.card), e.exp = h("exp", t.exp), e.name = h("name", t.name), e.cvv = r.Optional.of(t.cvv).map(i.FnUtils.partial2("cvv", h)).getValue(), e }, m = o.ListPipeline.identity().map(function (t) { return t.validity.valid }).reduce(s.BoolReducers.and).toCallable(), g = function () { function t(t) { this.cfg = t, this.data = d(t) } return t.prototype.setConfig = function (t) { this.cfg = t, this.data = d(t) }, t.prototype.validateConfig = function () { if (!this.cfg.fields || !Object.keys(this.cfg.fields).length) return new Error("fields and child keys are required when instantiating Payment Fields."); for (var t = 0, e = ["exp", "card", "name"]; t < e.length; t++) { var n = e[t]; if (!this.cfg.fields[n]) return new Error("fields." + n + " is required.") } for (var n in this.cfg.fields) if ("object" === c(this.cfg.fields[n])) { if (!{}.hasOwnProperty.call(a.g.fields, n)) return new Error("fields." + n + " is not a valid field."); var i = this.cfg.fields[n]; if (null != i && !window.document.querySelector(i.selector)) return i.selector ? new Error(i.selector + " is not a valid field selector.") : new Error("fields.selector is required") } if (this.cfg.classes) for (var r = 0, o = Object.keys(this.cfg.classes); r < o.length; r++) { n = o[r]; if (!{}.hasOwnProperty.call(a.g.classes, n)) return new Error("classes." + n + " is not a valid key.") } }, Object.defineProperty(t.prototype, "config", { get: function () { return f({}, (t = this.cfg, JSON.parse(JSON.stringify(t)))); var t }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "form", { get: function () { return this.data.form }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "classes", { get: function () { return this.data.classes }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "styles", { get: function () { return this.data.styles }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "fields", { get: function () { return this.data.fields }, enumerable: !0, configurable: !0 }), t.prototype.resetValidity = function () { this.eachField(function (t) { t.validity = u(t.field) }) }, t.prototype.resetTouched = function () { this.eachField(function (t) { t.validity.touched = !1 }) }, t.prototype.getField = function (t) { return r.Optional.of(this.data.fields[t]) }, t.prototype.eachField = function (t) { for (var e in this.data.fields) "object" === c(this.data.fields[e]) && this.getField(e).ifPresent(t) }, t.prototype.listFields = function () { return r.Optional.unboxList(a.c.map(this.getField.bind(this))) }, t.prototype.getFieldSelector = function (t) { return this.getField(t).map(function (t) { return t.config.selector }) }, t.prototype.isFieldValid = function (t) { return this.getField(t).map(function (t) { return t.validity.valid }) }, t.prototype.isValid = function () { return m(this.listFields()) }, t.prototype.isFieldTouched = function (t) { return this.getField(t).map(function (t) { return t.validity.touched }) }, t.prototype.touchField = function (t) { this.getField(t).ifPresent(function (t) { t.validity.touched = !0 }) }, t.prototype.checkRequiredFields = function () { var t = this;["card", "exp", "name"].forEach(function (e) { e in t.data.fields || console.error('required field missing from state: "' + e + '"') }) }, t }() }, , function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = n(1), o = function () { function t(t, e) { this.param = t, this.pipeline = e } return t.prototype.alsoDo = function (t) { return this.pipeline = this.pipeline.alsoDo(t), this }, t.prototype.map = function (t) { return this.pipeline = this.pipeline.map(t), this }, t.prototype.mapToProperty = function (t) { return this.map(i.FnUtils.liftProperty(t)) }, t.prototype.filter = function (t) { return this.map(function (e) { return r.Optional.of(e).filter(t) }) }, t.prototype.filterProperty = function (t, e) { return this.map(function (n) { return r.Optional.of(n).filterProperty(t, e) }) }, t.prototype.apply = function () { return this.pipeline.apply(this.param) }, t.prototype.toCallable = function () { return this.apply.bind(this) }, t }(); e.BoundPipeline = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = n(5), o = n(29), s = n(30), a = n(11), l = n(9), u = function () { function t(t) { this.fn = t } return t.identity = function () { return new s.EmptyListPipeline }, t.bound = function (e) { return new a.BoundListPipeline(e, t.identity()) }, t.fromCallable = function (e) { return new t(e) }, t.liftCallable = function (e) { return new o.BridgeListPipeline(e, t.identity()) }, t.liftPipeline = function (e) { return t.liftCallable(e.toCallable()) }, t.prototype.alsoDo = function (t) { return this.map(i.FnUtils.liftConsumer(t)) }, t.prototype.map = function (t) { return this.fn = i.FnUtils.compose(this.fn, t), this }, t.prototype.mapToProperty = function (t) { return this.map(i.FnUtils.liftProperty(t)) }, t.prototype.flatMap = function (e) { return new o.BridgeListPipeline(this.toCallable(), t.liftCallable(e)) }, t.prototype.sort = function (t) { return this.flatMap(function (e) { return e.sort(t) }) }, t.prototype.filter = function (t) { return this.flatMap(function (e) { return e.filter(t) }) }, t.prototype.filterProperty = function (t, e) { return this.filter(i.FnUtils.compose(i.FnUtils.liftProperty(t), e)) }, t.prototype.reduce = function (t) { return this.toPipeline().map(function (e) { return e.reduce(t) }) }, t.prototype.toFirst = function () { return this.toPipeline().map(l.ListUtils.getFirst) }, t.prototype.apply = function (t) { return t.map(this.fn) }, t.prototype.bind = function (t) { return new a.BoundListPipeline(t, this) }, t.prototype.toCallable = function () { return this.apply.bind(this) }, t.prototype.toPipeline = function () { return r.Pipeline.fromCallable(this.toCallable()) }, t }(); e.ListPipeline = u }, , function (t, e, n) {
  "use strict"; var i, r = n(7), o = n(0), s = function () { return (s = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }, a = function () {
    function t(t) { this.window = t } return t.prototype.unwrap = function () { return this.window }, t.prototype.isBrowserSupported = function () { var t = this.window; return t.crypto || t.msCrypto }, t.prototype.getElement = function (t) { return this.window.document.querySelector(t) }, t.prototype.getElements = function (t) { for (var e = [], n = this.window.document.querySelectorAll(t), i = 0; i < n.length; ++i)e.push(n[i]); return e }, t.prototype.on = function (t, e) { var n = this; this.window.addEventListener("message", function (i) { var r = /firstdata[.]com/, o = r.exec(n.origin), s = null != o && o.length > 0, a = r.exec(i.origin), l = null != a && a.length > 0; if (s || l) { var u = void 0; try { u = i.data ? JSON.parse(i.data) : {} } catch (t) { } !u || "ALL" !== t && u.action !== t || e(u) } }) }, t.prototype.sendMessage = function (t) {
      if (this.isLocal) throw new Error("current window shouldn't send messages to itself");
      var e = JSON.stringify(s({}, t));
      if (count1 === 0) {
        console.log('\nthis.origin=', this.origin, '\n');
        count1 = 1;
      }
      this.window.postMessage(e, this.origin)
    }, t
  }(), l = (i = function (t, e) { return (i = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(t, e) }, function (t, e) { function n() { this.constructor = t } i(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n) }),
    u = function (t, e) {
      return t.substring(0, e.length) === e
    }, c = function (t) {
      function e(e) { return t.call(this, e) || this } return l(e, t), Object.defineProperty(e, "current", { get: function () { return u(window.name, o.d) ? d.current.parent : new e(window) }, enumerable: !0, configurable: !0 }), e.prototype.createFrame = function () {
        var iframe = this.window.document.createElement("iframe");

        iframe.addEventListener( "load", function(e) {
          var name = iframe.getAttribute('name');
          console.log('iframe=', iframe);
          console.log('name=', name);
          console.log('iframe.window=', iframe.window);

          var frame;
          for(var key in  window.frames) {
            if (window.frames[key]?.name === name) {
              frame = window.frames[key];
              window.testIframe = frame;
            }
          };
          
          Object.defineProperty(frame.window.document, 'referrer', { get: () => { return 'file://'; } });
      } );
        
        return iframe;
      },
        Object.defineProperty(e.prototype, "isLocal", {
          get: function () {
            if (count2 === 0) {
              console.log('isLocal=', !u(window.name, o.d));
              count2 = 1;
            }
            return !u(window.name, o.d)
          }, enumerable: !0, configurable: !0
        }),
        Object.defineProperty(e.prototype, "origin",
          {
            get: function () {
              if (count3 === 0) {
                console.log('\nthis.isLocal=', this.isLocal);
                console.log('this.window.location.toString()=', this.window.location.toString());
                console.log('window.document.referrer=', window.document.referrer);
                console.log('origin=', this.isLocal ? this.window.location.toString() : window.document.referrer, '\n');
                count3 = 1;
              }
              return this.isLocal ? this.window.location.toString() : window.document.referrer
            }, enumerable: !0, configurable: !0
          }),
        e.prototype.getChild = function (t) { var e = this.window.frames["" + o.d + t]; if (e) return new d(e, t); throw new Error('failed to fetch iframe for field: "' + t + '"') }, e.prototype.dispatchEvent = function (t) { return this.window.dispatchEvent(t) }, e
    }(a), f = function () { var t = function (e, n) { return (t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(e, n) }; return function (e, n) { function i() { this.constructor = e } t(e, n), e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype, new i) } }(), p = function (t, e) { return t.substring(0, e.length) === e }, d = function (t) { function e(e, n) { var i = t.call(this, e) || this; return i.field = n, i } return f(e, t), Object.defineProperty(e, "current", { get: function () { if (window.name && p(window.name, o.d)) { var t = window.name.replace(o.d, ""); if (Object(o.f)(t)) return new e(window, t); throw new Error("window name does not contain valid field name") } throw new Error("window name does not start with expected prefix") }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isLocal", { get: function () { return p(window.name, o.d) && window.name === this.name }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "name", { get: function () { return "" + o.d + this.field }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "origin", { get: function () { return o.b }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "parent", { get: function () { return new c(this.window.parent) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "selector", { get: function () { return "#" + this.field }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { var t = this.getElement(this.selector); if (null == t) throw new Error('failed to get element for field "' + this.field + '" from frame "' + window.name + '"'); return t }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "value", { get: function () { var t = this.element; return null != t ? "name" === this.field ? t.value : r.StringUtils.stripWhitespace(t.value) : null }, enumerable: !0, configurable: !0 }), e.prototype.createField = function (t) { var e = this.getElement("#content"); e && (e.innerHTML += t) }, e }(a); n.d(e, "a", function () { return d }), n.d(e, "b", function () { return c })
}, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), function (t) { for (var n in t) e.hasOwnProperty(n) || (e[n] = t[n]) }(n(27)) }, , , , , function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(20); e.FnUtils = { bindInvoker: function (t) { return function (e) { return e(t) } }, compose: function (t, e) { return function (n) { return e(t(n)) } }, doAfter: function (t, e) { return function () { for (var n = [], i = 0; i < arguments.length; i++)n[i] = arguments[i]; var r = t.apply(void 0, n); return e(r), r } }, doBefore: function (t, e) { return function () { for (var n = [], i = 0; i < arguments.length; i++)n[i] = arguments[i]; return e.apply(void 0, n), t.apply(void 0, n) } }, ifElse: function (t, e, n) { return t ? e() : n() }, liftConsumer: function (t) { return function (e) { return t(e), e } }, liftNullable: function (t) { return function (e) { return i.Optional.of(t(e)) } }, liftProperty: function (t) { return function (e) { return e[t] } }, makeBatchReducer: function (t, n) { return function (i) { return n.map(e.FnUtils.bindInvoker(i)).reduce(t) } }, matchCompose: function (t, e) { return function (n) { return e[t(n)](n) } }, partial1: function (t, e) { return function () { return e(t) } }, partial2: function (t, e) { return function (n) { return e(t, n) } }, partial3: function (t, e) { return function (n, i) { return e(t, n, i) } }, partial4: function (t, e) { return function (n, i, r) { return e(t, n, i, r) } }, liftTry: function (t) { return function (e) { var n; try { n = t(e) } catch (t) { return r.Either.error(t) } return r.Either.success(n) } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = function () { function t(t) { this.value = t } return t.of = function (e) { return new t(e) }, t.some = function (e) { return t.of(e) }, t.none = function () { return t.of() }, t.liftList = function (e) { return t.some(t.unboxList(e)) }, t.flatten = function (e) { return e.orElseGet(t.none).getValue() }, t.unboxList = function (t) { return t.filter(function (t) { return t.isPresent() }).map(function (t) { return t.getValue() }) }, t.coalesce = function (e) { for (var n = 0, i = e; n < i.length; n++) { var r = i[n]; if (r.isPresent()) return r } return t.none() }, t.prototype.isPresent = function () { return null != this.value }, t.prototype.isEmpty = function () { return !this.isPresent() }, t.prototype.getValue = function () { return null == this.value ? void 0 : this.value }, t.prototype.mapToProperty = function (e) { return this.flatMap(i.FnUtils.compose(i.FnUtils.liftProperty(e), t.of)) }, t.prototype.filter = function (t) { return null != this.value && t(this.value) ? this : (this.value = null, this) }, t.prototype.filterProperty = function (t, e) { return this.filter(function (n) { return null != n[t] && e(n[t]) }) }, t.prototype.map = function (t) { return null != this.value && (this.value = t(this.value)), this }, t.prototype.flatMap = function (t) { return null != this.value ? t(this.value) : this }, t.prototype.orElse = function (t) { return this.isEmpty() && (this.value = t), this }, t.prototype.orElseGet = function (t) { return this.isEmpty() && (this.value = t()), this }, t.prototype.orElseThrow = function (t) { if (this.isPresent()) return this; throw t() }, t.prototype.try = function (t) { return this.map(i.FnUtils.liftTry(t)) }, t.prototype.coalesce = function (t) { return this.isEmpty() ? t : this }, t.prototype.ifPresent = function (t) { return null != this.value && t(this.value), this }, t.prototype.ifEmpty = function (t) { return null == this.value && t(), this }, t }(); e.Optional = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = function () { function t(t, e) { this.flag = t, this.data = e } return t.success = function (e) { return new t(!0, e) }, t.error = function (e) { return new t(!1, e) }, t.prototype.isSuccess = function () { return this.flag }, t.prototype.isError = function () { return !this.flag }, t.prototype.getValue = function () { return this.data }, t.prototype.ifError = function (t) { return this.flag || t(this.data), this }, t.prototype.ifSuccess = function (t) { return this.flag && t(this.data), this }, t.prototype.try = function (t) { return this.flatMap(i.FnUtils.liftTry(t)) }, t.prototype.flatMap = function (t) { return this.flag ? t(this.data) : this }, t.prototype.map = function (t) { return this.flag && (this.data = t(this.data)), this }, t }(); e.Either = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = n(16), o = n(1), s = n(5), a = function () { function t() { } return t.prototype.alsoDo = function (t) { return this.map(i.FnUtils.liftConsumer(t)) }, t.prototype.apply = function (t) { return t }, t.prototype.bind = function (t) { return new r.BoundPipeline(t, this) }, t.prototype.filter = function (t) { return this.map(function (e) { return o.Optional.of(e).filter(t) }) }, t.prototype.filterProperty = function (t, e) { return this.map(function (n) { return o.Optional.of(n).filterProperty(t, e) }) }, t.prototype.map = function (t) { return s.Pipeline.fromCallable(t) }, t.prototype.mapToProperty = function (t) { return this.map(i.FnUtils.liftProperty(t)) }, t.prototype.toCallable = function () { return this.apply.bind(this) }, t }(); e.EmptyPipeline = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = n(5), o = n(11), s = n(9), a = function () { function t(t, e) { this.fn = t, this.pipeline = e } return t.prototype.alsoDo = function (t) { return this.map(i.FnUtils.liftConsumer(t)) }, t.prototype.map = function (e) { return new t(this.fn, this.pipeline.map(e)) }, t.prototype.mapToProperty = function (t) { return this.map(i.FnUtils.liftProperty(t)) }, t.prototype.flatMap = function (e) { return new t(this.fn, this.pipeline.flatMap(e)) }, t.prototype.sort = function (e) { return new t(this.fn, this.pipeline.sort(e)) }, t.prototype.filter = function (e) { return new t(this.fn, this.pipeline.filter(e)) }, t.prototype.filterProperty = function (e, n) { return new t(this.fn, this.pipeline.filterProperty(e, n)) }, t.prototype.reduce = function (t) { return this.toPipeline().map(function (e) { return e.reduce(t) }) }, t.prototype.toFirst = function () { return this.toPipeline().map(s.ListUtils.getFirst) }, t.prototype.apply = function (t) { return this.pipeline.apply(this.fn(t)) }, t.prototype.bind = function (t) { return new o.BoundListPipeline(t, this) }, t.prototype.toCallable = function () { return this.apply.bind(this) }, t.prototype.toPipeline = function () { return r.Pipeline.fromCallable(this.toCallable()) }, t }(); e.BridgeListPipeline = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(2), r = n(5), o = n(17), s = n(11), a = n(9), l = function () { function t() { } return t.prototype.alsoDo = function (t) { return this.map(i.FnUtils.liftConsumer(t)) }, t.prototype.map = function (t) { return o.ListPipeline.fromCallable(t) }, t.prototype.mapToProperty = function (t) { return this.map(i.FnUtils.liftProperty(t)) }, t.prototype.flatMap = function (t) { return o.ListPipeline.liftCallable(t) }, t.prototype.sort = function (t) { return this.flatMap(function (e) { return e.sort(t) }) }, t.prototype.filter = function (t) { return this.flatMap(function (e) { return e.filter(t) }) }, t.prototype.filterProperty = function (t, e) { return this.filter(i.FnUtils.compose(i.FnUtils.liftProperty(t), e)) }, t.prototype.reduce = function (t) { return this.toPipeline().map(function (e) { return e.reduce(t) }) }, t.prototype.toFirst = function () { return this.toPipeline().map(a.ListUtils.getFirst) }, t.prototype.apply = function (t) { return t }, t.prototype.bind = function (t) { return new s.BoundListPipeline(t, this) }, t.prototype.toCallable = function () { return this.apply.bind(this) }, t.prototype.toPipeline = function () { return r.Pipeline.fromCallable(this.toCallable()) }, t }(); e.EmptyListPipeline = l }, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function (t, e, n) {
  "use strict"; n.r(e); var i = n(2), r = n(1), o = n(6), s = n(0), a = n(4), l = n(8), u = n(14), c = n(13), f = n(19); function p(t) { return (p = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } var d = function () { return (d = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }, h = function (t, e) { if (!e) throw t; e(t) }, y = function (t, e) { try { t() } catch (t) { h(function (t) { return t instanceof Error ? t : "string" == typeof t ? new Error(t) : new Error('failed to normalize error with type "' + p(t) + '": "' + JSON.stringify(t) + '"') }(t), e) } }, m = o.ListPipeline.identity().filter(function (t) { return !1 === t.validity.valid }).map(function (t) { return d({}, t.validity, { selector: t.config.selector }) }).toCallable(), g = o.ListPipeline.identity().map(function (t) { return { name: t.field, valid: t.validity.valid } }).toCallable(), v = function (t, e) { "FOCUS" === t.action ? e.cssFocusClass() : "EMPTY" === t.action ? e.cssEmptyClass(t.length) : "BLUR" === t.action ? (e.cssBlurClass(), 0 === t.length && t.touched && e.cssValidityClass(!1, !1)) : ["CARD_TYPE", "CARD_EXP_DATE", "CVV_TYPE"].indexOf(t.action) > -1 ? 0 === t.length && t.touched ? e.cssValidityClass(!1, !1) : "CVV_TYPE" === t.action && t.cvvSync && t.cardIsValid && 0 !== t.length ? e.cssValidityClass(t.isValid, t.isValid) : "isPotentiallyValid" in t && e.cssValidityClass(t.isPotentiallyValid, t.isValid) : "FULL_NAME" === t.action && (t.length > 0 ? e.cssValidityClass(!0, !0) : (0 === t.length && t.touched || "blur" === t.eventType && 0 === t.length) && e.cssValidityClass(!1, !1)), "eventType" in t && "blur" === t.eventType && t.touched && !t.isValid && e.cssValidityClass(!1, !1) }, b = function () {
    function t(t, e, n, i) { this.window = t, this.state = e, this.hooks = n, this.logger = i, this.tokenResponseHandlerRegistered = !1 } return t.createAsync = function (e, n, i, r, o) {
      var s = new u.a(e),
      a = new t(f.b.current, s, n, o); if (a.isSupported()) { var c = s.validateConfig(); c ? h(c, r) : a.createFields(function () { return i(a) }, null === r ? void 0 : r) } else h(new Error(l.a.BROWSER_NOT_SUPPORTED), r) }, t.prototype.tokenize = function (t) { console.error("PaymentForm.tokenize is deprecated, please migrate to PaymentForm.onSubmit"), this.onSubmit(function (e) { return t({ clientToken: e, error: !1 }) }, function (e) { return t({ error: !0, reason: e.message }) }) }, t.prototype.onSubmit = function (t, e) { var n = this; this.writeLog("trace", "entering onSubmit"), y(function () { n.validate(function () { n.authenticate(function (i) { return n.submit(i, t, e) }, e) }, e) }, e), this.writeLog("trace", "leaving onSubmit") }, t.prototype.createFields = function (t, e) { var n = this; this.writeLog("trace", "entering create"), y(function () { var e = n.state.config; n.injectConfig(e), n.toggleClasses(), n.onClickLabel(), n.validityState(), n.waitUntilAllFramesLoaded(n.state.listFields().length, t), n.createFrames() }, e), this.writeLog("trace", "leaving create") }, t.prototype.destroyFields = function (t, e) { var n = this; this.writeLog("trace", "entering destroy"), y(function () { n.reset(function () { var e = []; n.state.eachField(function (t) { var i = t.field, r = n.window.getElement("#" + s.d + i); e.push({ field: i, destroyed: null !== r }), null != r && null != r.parentNode && r.parentNode.removeChild(r) }), e.every(function (t) { return !0 === t.destroyed }) ? t() : h(new Error("failed to find/destroy all frames")) }) }, e), this.writeLog("trace", "leaving destroy") }, t.prototype.reset = function (t, e) { var n = this; this.writeLog("trace", "entering reset"), y(function () { n.state.eachField(function (t) { var e = t.field; n.sendMessage(e, { action: "RESET", field: e, iFrame: "" + s.d + e }), n.getFieldElementUtils(e).ifPresent(function (t) { return t.removeCssValidityClass() }), window.dispatchEvent(Object(c.a)("RESET", { field: e })) }), n.state.resetValidity(), t() }, e), this.writeLog("trace", "leaving reset") }, t.prototype.validate = function (t, e) { var n = this; this.writeLog("trace", "entering validate"), y(function () { if (n.isValid()) t(); else { for (var i = n.state.listFields(), r = m(i), o = g(i), s = function (t) { n.getFieldElementUtils(t.name).ifPresent(function (e) { return e.cssValidityClass(t.valid, t.valid) }) }, a = 0, u = o; a < u.length; a++) { s(u[a]) } n.sendMessage("card", { action: "SUBMIT", field: "card", items: o }); var c = new Error(l.a.BAD_FORM_DATA); c.data = r, h(c, e) } }, e), this.writeLog("trace", "leaving validate") }, t.prototype.authenticate = function (t, e) { var n = this; this.writeLog("trace", "entering authenticate"), y(function () { n.hooks.preFlowHook(function (n) { if (n.clientToken) if (n.publicKeyBase64) { var i = n.clientToken, r = n.publicKeyBase64; t({ clientToken: i, publicKeyBase64: r }) } else h(new Error(l.a.CLIENT_KEY_MISSING), e); else h(new Error(l.a.CLIENT_TOKEN_MISSING), e) }) }, e), this.writeLog("trace", "leaving authenticate") }, t.prototype.submit = function (t, e, n) { var i = this; this.writeLog("trace", "entering submit"), this.onSubmitAuth = t, this.onSubmitSuccess = e, this.onSubmitError = n, y(function () { i.tokenResponseHandlerRegistered || (i.tokenResponseHandlerRegistered = !0, i.window.on("TOKEN_RESPONSE", function (t) { t.error ? h(new Error(t.reason), i.onSubmitError) : i.onSubmitSuccess && i.onSubmitAuth && i.onSubmitSuccess(i.onSubmitAuth.clientToken) })), i.sendMessage("card", { action: "TOKEN_REQUEST", auth: t, field: "card" }) }, n), this.writeLog("trace", "leaving submit") }, t.prototype.isSupported = function () { return this.window.isBrowserSupported() }, t.prototype.getState = function (t) { var e, n = this; this.writeLog("trace", "entering getState"); var i = function (t) { return n.state.getField(t).mapToProperty("validity").getValue() }; t(((e = {}).exp = i("exp"), e.card = i("card"), e.name = i("name"), e.cvv = i("cvv"), e)), this.writeLog("trace", "leaving getState") }, t.prototype.isValid = function () { return this.state.isValid() }, t.prototype.on = function (t, e) { var n = this; this.state.eachField(function (i) { "focus" === t ? n.onFieldFocus(i.config.selector, i.field, e) : "blur" === t ? n.onFieldBlur(i.config.selector, i.field, e) : "change" === t && n.onFieldChange(i.config.selector, i.field, e) }), "cardType" === t && this.state.getFieldSelector("card").ifPresent(function (t) { return n.onFieldCardType(t, "card", e) }) }, t.prototype.writeLog = function (t, e) { this.logger && this.logger(t, e) }, t.prototype.injectConfig = function (t) {
      var e = this;
      this.window.on("FRAME_LOADED", function (n) {
        var i = n.field;
        i && e.sendMessage(i, { action: "INJECT_CONFIG", config: t, field: i })
      })
    }, t.prototype.toggleClasses = function () { var t = this, e = ["FOCUS", "BLUR", "CARD_TYPE", "CARD_EXP_DATE", "CVV_TYPE", "EMPTY", "FULL_NAME"]; this.window.on("ALL", function (n) { "target" in n && e.indexOf(n.action) > -1 && t.getFieldElementUtils(n.target).ifPresent(i.FnUtils.partial2(n, v)) }) }, t.prototype.onClickLabel = function () {
      var t = this;
      this.window.on("FRAME_LOADED", function (e) {
        t.getFrameElement(e.field).mapToProperty("id").map(function (e) {
          return t.window.getElement("label[for=" + e + "]")
        }).ifPresent(function (n) {
          n.addEventListener("click", function () {
            t.sendMessage(e.field, { action: "CLICK_LABEL", field: e.field })
          }, !1)
        })
      })
    }, t.prototype.validityState = function () { var t = this, e = function (e) { t.state.getField(e.target).ifPresent(function (n) { Object(u.b)(n) && "type" in e && (n.validity.brand = e.type, n.validity.brandNiceType = e.niceType), n.validity.empty = 0 === e.length, n.validity.touched = e.touched, n.validity.length = e.length, n.validity.field = e.target, n.validity.valid = e.isValid, n.validity.potentiallyValid = e.isPotentiallyValid, t.window.dispatchEvent(Object(c.a)("VALIDITY_CHANGE", { field: n.field })) }) }; this.window.on("FULL_NAME", e), this.window.on("CARD_TYPE", e), this.window.on("CVV_TYPE", e), this.window.on("CARD_EXP_DATE", e) }, t.prototype.createFrames = function () {
      
      this.state.eachField(this.createFrame.bind(this));
    }, t.prototype.createFrame = function (t) { var e = this.window.createFrame(), n = "" + s.d + t.field; e.setAttribute("src", s.e), e.setAttribute("id", n), e.setAttribute("name", n), e.setAttribute("frameborder", "0"), e.setAttribute("allowtransparency", "true"), e.setAttribute("scrolling", "no"), e.title = "payment field " + t.field, e.style.width = "100%", e.style.height = "100%", e.style.border = "none", e.style.cssFloat = "left"; var i = this.window.getElement(t.config.selector); if (!i) throw new Error('failed to create iframe for field: "' + t.field); if (i.appendChild(e), null == e.contentWindow) throw new Error('failed to create iframe for field: "' + t.field) }, t.prototype.waitUntilAllFramesLoaded = function (t, e) {
      var n = 0;
      this.window.on("FRAME_LOADED", function (i) {
        var r = i.field; r && (n += 1), r && t === n && e()
      })
    }, t.prototype.onFieldFocus = function (t, e, n) { this.window.on("FOCUS", function (i) { i.target === e && n({ field: e, selector: t }) }) }, t.prototype.onFieldBlur = function (t, e, n) { this.window.on("BLUR", function (i) { i.target === e && n({ field: e, selector: t }) }) }, t.prototype.onFieldChange = function (t, e, n) { var i = this; e in this.state.fields && window.addEventListener("VALIDITY_CHANGE", function (r) { "detail" in r && r.detail.field === e && n(d({}, i.state.fields[e].validity, { selector: t })) }, !1) }, t.prototype.onFieldCardType = function (t, e, n) { var i = function (i) { i.target === e && n({ brand: i.type, brandNiceType: i.niceType, code: i.code, field: e, potentiallyValid: i.isPotentiallyValid, selector: t, valid: i.isValid }) }; window.addEventListener("RESET", function (t) { "detail" in t && t.detail.field === e && i({ code: "", eventType: "keyup", isPotentiallyValid: !1, isValid: !1, niceType: "", target: e, type: "" }) }, !1), this.window.on("CARD_TYPE", i) }, t.prototype.getFieldElement = function (t) { var e = this; return this.state.getFieldSelector(t).map(function (t) { return e.window.getElement(t) }) }, t.prototype.getFieldElementUtils = function (t) { var e = this; return this.getFieldElement(t).map(function (t) { return new a.a(e.state, t) }) }, t.prototype.getFrameElement = function (t) { return t in this.state.fields ? r.Optional.of(this.window.getElement("#" + s.d + t)) : r.Optional.none() }, t.prototype.sendMessage = function (t, e) { this.window.getChild(t).sendMessage(e) }, t
  }(); window.firstdata = window.firstdata || {},
  window.firstdata.createPaymentForm = function (t, e, n, i) {
    b.createAsync(t, e, n, null, i)
  }
}]);